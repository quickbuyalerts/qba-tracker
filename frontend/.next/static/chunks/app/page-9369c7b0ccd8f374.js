(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3106:function(e,s,a){Promise.resolve().then(a.bind(a,434))},434:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var l=a(7437),r=a(2265);function t(e){return null==e?"-":e<1e-5?"$".concat(e.toExponential(2)):e<.01?"$".concat(e.toFixed(6)):e<1?"$".concat(e.toFixed(4)):"$".concat(e.toFixed(2))}function n(e){return null==e?"-":e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(1),"K"):"$".concat(e.toFixed(0))}function i(e){return null==e?"-":"".concat(e>=0?"+":"").concat(e.toFixed(1),"%")}let c=[{key:"symbol",label:"Token",sortKey:e=>{var s,a;return(null===(a=e.baseToken)||void 0===a?void 0:null===(s=a.symbol)||void 0===s?void 0:s.toLowerCase())||""}},{key:"priceUsd",label:"Price",sortKey:e=>{var s;return null!==(s=e.priceUsd)&&void 0!==s?s:0}},{key:"marketCap",label:"MCap",sortKey:e=>{var s;return null!==(s=e.marketCap)&&void 0!==s?s:0}},{key:"liquidity",label:"Liquidity",sortKey:e=>{var s;return null!==(s=e.liquidity)&&void 0!==s?s:0}},{key:"volume24h",label:"24h Vol",sortKey:e=>{var s;return null!==(s=e.volume24h)&&void 0!==s?s:0}},{key:"priceChange24h",label:"24h%",sortKey:e=>{var s;return null!==(s=e.priceChange24h)&&void 0!==s?s:0}},{key:"rsi",label:"RSI",sortKey:null},{key:"athPct",label:"% from ATH",sortKey:null},{key:"ath",label:"ATH",sortKey:e=>{var s;return null!==(s=e.ath)&&void 0!==s?s:0}},{key:"age",label:"Age",sortKey:e=>{var s;return null!==(s=e.pairCreatedAt)&&void 0!==s?s:0}}];function o(){let e=[180,70,80,80,80,60,60,70,70,50];return(0,l.jsx)("div",{className:"loading-container",children:Array.from({length:8}).map((s,a)=>(0,l.jsx)("div",{className:"skeleton-row",children:e.map((e,s)=>(0,l.jsx)("div",{className:"skeleton skeleton-cell",style:{width:e,flexShrink:0}},s))},a))})}function d(){var e,s,a,d,u,h;let[m,v]=(0,r.useState)({}),[x,p]=(0,r.useState)(null),[j,f]=(0,r.useState)(!0),[N,y]=(0,r.useState)(null),[b,k]=(0,r.useState)(""),[g,C]=(0,r.useState)("marketCap"),[S,w]=(0,r.useState)("desc"),[K,A]=(0,r.useState)("5m"),[L,T]=(0,r.useState)(new Set),[R,E]=(0,r.useState)(0),F=(0,r.useRef)(null),$=(0,r.useRef)(null),U=(0,r.useCallback)(()=>{F.current&&F.current.close(),y(null);let e=new EventSource("".concat("","/api/stream"));F.current=e,e.addEventListener("snapshot",e=>{try{let s=JSON.parse(e.data);v(s.pairs||{}),p(s.stats||null),f(!1),y(null)}catch(e){console.error("Snapshot parse error:",e)}}),e.addEventListener("update",e=>{try{let s=JSON.parse(e.data);if(s.pairs){let e=new Set;v(a=>{let l={...a};for(let a of s.pairs){let s=a.pairAddress;s&&(l[s]=a,e.add(s))}return l}),T(e),setTimeout(()=>T(new Set),1e3)}s.stats&&p(s.stats),E(e=>e+1)}catch(e){console.error("Update parse error:",e)}}),e.addEventListener("heartbeat",()=>{}),e.onerror=()=>{e.close(),y("Connection lost. Reconnecting..."),$.current=setTimeout(U,3e3)}},[]);(0,r.useEffect)(()=>(U(),()=>{F.current&&F.current.close(),$.current&&clearTimeout($.current)}),[U]);let M=(0,r.useMemo)(()=>{let e=Object.values(m);if(b){let s=b.toLowerCase();e=e.filter(e=>{var a,l;return((null===(a=e.baseToken)||void 0===a?void 0:a.symbol)||"").toLowerCase().includes(s)||((null===(l=e.baseToken)||void 0===l?void 0:l.name)||"").toLowerCase().includes(s)||(e.pairAddress||"").toLowerCase().includes(s)})}let s=e=>{if("rsi"===g){var s,a;return"5m"===K?null!==(s=e.rsi5m)&&void 0!==s?s:-1:null!==(a=e.rsi15m)&&void 0!==a?a:-1}if("athPct"===g)return null==e.ath||null==e.priceUsd?-9999:(e.priceUsd-e.ath)/e.ath*100;let l=c.find(e=>e.key===g);return(null==l?void 0:l.sortKey)?l.sortKey(e):0};return e.sort((e,a)=>{let l=s(e),r=s(a);return"string"==typeof l?"asc"===S?l.localeCompare(r):r.localeCompare(l):"asc"===S?l-r:r-l}),e},[m,b,g,S,K]),P=e=>{g===e?w(e=>"asc"===e?"desc":"asc"):(C(e),w("desc"))};return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,l.jsxs)("header",{className:"header",children:[(0,l.jsxs)("div",{className:"header-left",children:[(0,l.jsx)("div",{className:"live-dot"}),(0,l.jsx)("h1",{children:"QBA TRACKER"})]}),(0,l.jsxs)("div",{className:"header-right",children:[(0,l.jsxs)("div",{className:"rsi-selector",children:[(0,l.jsx)("button",{className:"rsi-btn ".concat("5m"===K?"active":""),onClick:()=>A("5m"),children:"RSI 5m"}),(0,l.jsx)("button",{className:"rsi-btn ".concat("15m"===K?"active":""),onClick:()=>A("15m"),children:"RSI 15m"})]}),(0,l.jsx)("input",{className:"search-box",type:"text",placeholder:"Search token...",value:b,onChange:e=>k(e.target.value)})]})]}),(0,l.jsxs)("div",{className:"ticker-bar",children:[(0,l.jsx)("span",{className:"filter-tag",children:"SOL"}),(0,l.jsx)("span",{className:"filter-tag",children:"PumpSwap + PumpFun"}),(0,l.jsx)("span",{className:"filter-tag",children:"Liq > $10K"}),(0,l.jsx)("span",{className:"filter-tag",children:"MCap > $30K"}),(0,l.jsx)("span",{className:"filter-tag",children:"Age 48-480min"}),(0,l.jsx)("span",{className:"filter-tag",children:"24h Vol $80K-$180K"}),(0,l.jsxs)("span",{style:{marginLeft:"auto",color:"var(--text-dim)"},children:[null!==(e=null==x?void 0:x.totalPairs)&&void 0!==e?e:0," pairs tracked"]}),(0,l.jsx)("div",{className:"refresh-bar"},R)]}),N&&(0,l.jsxs)("div",{className:"error-banner",children:[(0,l.jsx)("span",{children:"⚠"})," ",N,(0,l.jsx)("button",{onClick:U,style:{marginLeft:12,background:"transparent",border:"1px solid var(--red)",color:"var(--red)",fontFamily:"'Space Mono', monospace",fontSize:10,padding:"2px 8px",cursor:"pointer",borderRadius:3},children:"Retry"})]}),(0,l.jsx)("div",{className:"table-container",style:{flex:1},children:j?(0,l.jsx)(o,{}):0===M.length?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("h2",{children:b?"No matches found":"Waiting for data..."}),(0,l.jsx)("p",{children:b?"Try a different search term":"The collector is discovering pairs"})]}):(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:c.map(e=>(0,l.jsxs)("th",{className:g===e.key?"sorted":"",onClick:()=>P(e.key),children:[e.label,g===e.key&&(0,l.jsx)("span",{className:"sort-arrow",children:"asc"===S?"▲":"▼"})]},e.key))})}),(0,l.jsx)("tbody",{children:M.map(e=>{var s,a;let r="5m"===K?e.rsi5m:e.rsi15m,c=null!=e.ath&&null!=e.priceUsd?(e.priceUsd-e.ath)/e.ath*100:null;return(0,l.jsxs)("tr",{className:L.has(e.pairAddress)?"flash-row":"",children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"token-cell",children:[e.imageUrl?(0,l.jsx)("img",{className:"token-icon",src:e.imageUrl,alt:"",onError:e=>{e.target.style.display="none"}}):(0,l.jsx)("div",{className:"token-icon"}),(0,l.jsxs)("div",{className:"token-info",children:[(0,l.jsx)("span",{className:"token-symbol",children:(null===(s=e.baseToken)||void 0===s?void 0:s.symbol)||"???"}),(0,l.jsxs)("div",{className:"token-meta",children:[e.dexId&&(0,l.jsx)("span",{className:"dex-tag",children:e.dexId}),(0,l.jsx)("span",{children:(a=e.pairAddress)?"".concat(a.slice(0,4),"...").concat(a.slice(-4)):""})]})]})]})}),(0,l.jsx)("td",{children:t(e.priceUsd)}),(0,l.jsx)("td",{children:n(e.marketCap)}),(0,l.jsx)("td",{children:n(e.liquidity)}),(0,l.jsx)("td",{children:n(e.volume24h)}),(0,l.jsx)("td",{className:e.priceChange24h>=0?"positive":"negative",children:i(e.priceChange24h)}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"rsi-cell",children:null!=r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"rsi-badge ".concat(null==r?"neutral":r>70?"overbought":r<30?"oversold":"neutral"),children:r.toFixed(1)}),(0,l.jsx)("div",{className:"rsi-bar",children:(0,l.jsx)("div",{className:"rsi-bar-fill",style:{width:"".concat(Math.min(100,r),"%"),background:null==r?"var(--border)":r>70?"var(--red)":r<30?"var(--accent)":"var(--blue)"}})})]}):(0,l.jsx)("span",{style:{color:"var(--text-dim)"},children:"-"})})}),(0,l.jsx)("td",{className:null==c?"":c>-10?"ath-near":c<-40?"ath-far":"",children:null!=c?i(c):"-"}),(0,l.jsx)("td",{children:t(e.ath)}),(0,l.jsx)("td",{children:function(e){if(!e)return"-";let s=Date.now()-e,a=Math.floor(s/36e5);return a<1?"".concat(Math.floor(s/6e4),"m"):a<24?"".concat(a,"h"):"".concat(Math.floor(a/24),"d ").concat(a%24,"h")}(e.pairCreatedAt)})]},e.pairAddress)})})]})}),(0,l.jsxs)("footer",{className:"footer",children:[(0,l.jsxs)("div",{className:"footer-stats",children:[(0,l.jsxs)("div",{className:"footer-stat",children:[(0,l.jsx)("span",{className:"label",children:"Pairs:"}),(0,l.jsx)("span",{className:"value",children:null!==(s=null==x?void 0:x.totalPairs)&&void 0!==s?s:0})]}),(0,l.jsxs)("div",{className:"footer-stat",children:[(0,l.jsx)("span",{className:"label",children:"Overbought:"}),(0,l.jsx)("span",{className:"value",style:{color:"var(--red)"},children:null!==(a=null==x?void 0:x.overbought)&&void 0!==a?a:0})]}),(0,l.jsxs)("div",{className:"footer-stat",children:[(0,l.jsx)("span",{className:"label",children:"Oversold:"}),(0,l.jsx)("span",{className:"value",style:{color:"var(--accent)"},children:null!==(d=null==x?void 0:x.oversold)&&void 0!==d?d:0})]}),(0,l.jsxs)("div",{className:"footer-stat",children:[(0,l.jsx)("span",{className:"label",children:"Avg RSI:"}),(0,l.jsx)("span",{className:"value",children:null!==(u=null==x?void 0:x.avgRsi)&&void 0!==u?u:"-"})]})]}),(0,l.jsxs)("div",{className:"status-badge",children:[(0,l.jsx)("div",{className:"dot ".concat((null==x?void 0:x.collectorStatus)==="running"?"running":"error")}),(0,l.jsxs)("span",{children:["Collector: ",null!==(h=null==x?void 0:x.collectorStatus)&&void 0!==h?h:"unknown"]})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3106)}),_N_E=e.O()}]);